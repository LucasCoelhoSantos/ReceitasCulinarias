<div class="d-flex justify-content-between align-items-center mb-4">
  <h2 class="mb-0">Minhas Receitas</h2>
  <a routerLink="/recipes/new" class="btn btn-primary">
    <i class="bi bi-plus-circle me-1"></i>
    Criar Nova Receita
  </a>
</div>

<ng-container *ngIf="recipes$ | async as recipes; else loading">

  <div *ngIf="recipes.length > 0; else noRecipes" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div *ngFor="let recipe of recipes" class="col">
      <div class="card h-100 shadow-sm recipe-card">
        <img [src]="recipe.imageUrl || 'https://placehold.co/600x400/EEE/31343C?text=Sem+Imagem'" class="card-img-top" [alt]="recipe.name">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ recipe.name }}</h5>
          <p class="card-text text-muted flex-grow-1">{{ recipe.description | slice:0:100 }}...</p>
          <div>
            <span class="badge bg-secondary me-2">{{ recipe.category }}</span>
            <span class="badge bg-info text-dark"><i class="bi bi-clock me-1"></i>{{ recipe.prepTimeMinutes }} min</span>
          </div>
        </div>
        <div class="card-footer bg-transparent border-top-0 d-flex justify-content-end gap-2 p-3">
          <a [routerLink]="['/recipes/edit', recipe.id]" class="btn btn-outline-secondary btn-sm">Editar</a>
          <button (click)="deleteRecipe(recipe.id)" class="btn btn-outline-danger btn-sm">Excluir</button>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noRecipes>
    <div class="text-center mt-5 p-5 bg-light rounded">
      <h4>Nenhuma receita encontrada.</h4>
      <p>Que tal <a routerLink="/recipes/new">criar a primeira</a>?</p>
    </div>
  </ng-template>

</ng-container>

<ng-template #loading>
  <div class="text-center mt-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Carregando...</span>
    </div>
    <p class="mt-2">Carregando receitas...</p>
  </div>
</ng-template>